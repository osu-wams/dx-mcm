listener:
  handler: src/listener/receiver.handler
  name: ${self:service.name}-listenerReceiver
  description: !Join [' ', ['Listens to SNS Topic', !GetAtt apiSnsTopic.TopicName]]
  events:
    - sns:
        arn: !Ref apiSnsTopic
        topicName: ${self:service.name}-api # sadly, this has to be a string and can't be !GetAtt due to a bug, see https://github.com/serverless/serverless/issues/3824#issuecomment-436533656
        filterPolicy:
          execute:
            - test3
            - test2

messageListener:
  handler: src/listener/message.handler
  name: ${self:service.name}-messageListener
  description: !Join [' ', ['Listens to SNS Topic', !GetAtt apiSnsTopic.TopicName]]
  events:
    - sns:
        arn: !Ref apiSnsTopic
        topicName: ${self:service.name}-api # sadly, this has to be a string and can't be !GetAtt due to a bug, see https://github.com/serverless/serverless/issues/3824#issuecomment-436533656
        filterPolicy:
          execute:
            - createmessage
