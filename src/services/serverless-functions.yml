messageListener:
  handler: src/services/messages/apiListener.handler
  name: ${self:service.name}-apiMessageListener
  description: !Join [' ', ['Listens to SNS Topic', !GetAtt apiSnsTopic.TopicName]]
  events:
    - sns:
        arn: !Ref apiSnsTopic
        topicName: ${self:service.name}-api # sadly, this has to be a string and can't be !GetAtt due to a bug, see https://github.com/serverless/serverless/issues/3824#issuecomment-436533656
        filterPolicy:
          action:
            - create_message
